markerLatLng = new google.maps.LatLng({lat: <%= fish.latitude.to_s %>, lng: <%= fish.longitude.to_s %> });
marker[<%= fish.id %>] = new markerWithLabel.MarkerWithLabel({
  position: markerLatLng,
  map: map,
  icon: {
    url: "<%= fish.latest? ? 'images/fish_new1.png' : 'images/fish1.png' %>",
    scaledSize: new google.maps.Size(32, 40)
  },
  labelContent: '<%= fish.species.name %>',
  labelClass: "marker-labels",
});
// 吹き出しの追加
infoWindow[<%= fish.id %>] = new google.maps.InfoWindow({
  position: markerLatLng,
  content: `
  <div class="sample">サイズ：<%= fish.size %></div>
  <div class="sample">天　気：<%= fish.weather_i18n %></div>
  <div class="sample">風　向：<%= fish.wind_direction_i18n %></div>
  <div class="sample">風　速：<%= fish.wind_speed %> m/s</div>
  <div class="sample">気　温：<%= fish.temperature %> ℃</div>
  <div class="sample">潮　名：<%= fish.tide_name_i18n %></div>
  `,
  pixelOffset: new google.maps.Size(0, -50)
});

markerEvent(<%= fish.id %>); // マーカーにクリックイベントを追加

// マーカーをホバーした時に吹き出しを表示
function markerEvent(i) {
  marker[i].addListener('click', function() { // マーカーをクリックしたとき
    location.href = "/fishes/" + i
  });
  marker[i].addListener('mouseover', function() { // マーカーをクリックしたとき
    infoWindow[i].open(map, marker[i]); // 吹き出しの表示
  });
  marker[i].addListener('mouseout', function(){
    infoWindow[i].close(map, marker[i]);
  });
}
